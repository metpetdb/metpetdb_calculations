<!DOCTYPE html>
<html>
<body>

<form id="vars" accept-charset="ISO-8859-1">
  Enter pressure minimum: <input type="text" name="pbarsmin"><br>
  Enter pressure maximum: <input type="text" name="pbarsmax"><br>
  Enter pressure interval length: <input type="text" name="pbarsint"><br>
</form>

<br>
<button onclick="calculate()">Submit</button>

<p id="tc"></p>

<p id="test"></p>

<script>
	function cbfunc(json)
	{
		document.getElementById("tc").innerHTML += "TC at "+json.query.results.json["pbars"]+" bars: "+json.query.results.json["tc"]+'<br>';
	}
	function calculate()
	{
		var pbarsmin = document.getElementById("vars").elements[0].value;
		var pbarsmax = document.getElementById("vars").elements[1].value;
		var pbarsint = document.getElementById("vars").elements[2].value;
		for (p = pbarsmin; p < pbarsmax; p += pbarsint)
		{
			var URL = 'http://54.152.139.14/calc/?scriptname=BiotiteTourmaline_Fe_Mg&FeBiotite=0.8&MgBiotite=0.8&FeTour=0.8&MgTour=0.8&Pbars='+p.toString()+'&iCalib=1&format=json'
			var yql = "select * from json where url='"+URL+"';";
			yql = "http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(yql)+"&format=json"+"&callback=cbfunc";
			var script = document.createElement("script");
			script.setAttribute("src", yql);
			script.setAttribute("type", "text/javascript");
			document.getElementsByTagName('head')[0].appendChild(script);
		}
	}

</script>
</body>
</html>